<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GoTogether - Camping Adventures</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Leaflet Maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        /* COMPREHENSIVE DARK THEME SYSTEM */
        :root {
            /* Core Color Palette */
            --primary-green: #22c55e;
            --primary-green-dark: #16a34a;
            --primary-green-light: #4ade80;
            --accent-blue: #3b82f6;
            --danger-red: #ef4444;
            --warning-orange: #f59e0b;
            
            /* Background System */
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --bg-card: #1e293b;
            --bg-modal: #0f172a;
            --bg-hover: #475569;
            --bg-active: #64748b;
            
            /* Text System - WCAG AA+ Compliant */
            --text-primary: #ffffff;
            --text-secondary: #f1f5f9;
            --text-tertiary: #e2e8f0;
            --text-muted: #cbd5e1;
            --text-disabled: #94a3b8;
            
            /* Border System */
            --border-primary: #334155;
            --border-secondary: #475569;
            --border-accent: #22c55e;
            --border-focus: #3b82f6;
            
            /* Shadow System */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
            --shadow-glow: 0 0 20px rgba(34, 197, 94, 0.3);
            
            /* Complete iOS Variable Mapping */
            --ios-blue: #3b82f6;
            --ios-green: #22c55e;
            --ios-red: #ef4444;
            --ios-orange: #f59e0b;
            --ios-purple: #8b5cf6;
            --ios-pink: #ec4899;
            --ios-indigo: #6366f1;
            --ios-gray: #94a3b8;
            --ios-gray-1: #f8fafc;
            --ios-gray-2: #f1f5f9;
            --ios-gray-3: #e2e8f0;
            --ios-gray-4: #cbd5e1;
            --ios-gray-5: #94a3b8;
            --ios-gray-6: #64748b;
            
            /* iOS Background System */
            --ios-background: var(--bg-primary);
            --ios-secondary-background: var(--bg-secondary);
            --ios-tertiary-background: var(--bg-tertiary);
            --ios-grouped-background: var(--bg-primary);
            --ios-secondary-grouped-background: var(--bg-card);
            
            /* iOS Text System */
            --ios-label: var(--text-primary);
            --ios-secondary-label: var(--text-secondary);
            --ios-tertiary-label: var(--text-tertiary);
            --ios-quaternary-label: var(--text-muted);
            
            /* iOS Shadow System */
            --ios-shadow-1: var(--shadow-sm);
            --ios-shadow-2: var(--shadow-md);
            --ios-shadow-3: var(--shadow-lg);
        }

        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.5;
            font-size: 16px;
            margin: 0;
            padding: 0;
        }

        /* SYSTEMATIC HARDCODED COLOR REPLACEMENT */
        
        /* Tailwind Gray Scale Override */
        .text-gray-900 { color: var(--text-primary) !important; }
        .text-gray-800 { color: var(--text-primary) !important; }
        .text-gray-700 { color: var(--text-secondary) !important; }
        .text-gray-600 { color: var(--text-tertiary) !important; }
        .text-gray-500 { color: var(--text-muted) !important; }
        .text-gray-400 { color: var(--text-disabled) !important; }
        .text-gray-300 { color: var(--text-disabled) !important; }
        
        /* Background Color Overrides */
        .bg-white { background-color: var(--bg-card) !important; }
        .bg-gray-50 { background-color: var(--bg-secondary) !important; }
        .bg-gray-100 { background-color: var(--bg-tertiary) !important; }
        .bg-gray-200 { background-color: var(--bg-hover) !important; }
        
        /* Border Color Overrides */
        .border-gray-200 { border-color: var(--border-primary) !important; }
        .border-gray-300 { border-color: var(--border-secondary) !important; }
        .border-gray-400 { border-color: var(--border-secondary) !important; }
        
        /* Hover State Overrides */
        .hover\\:bg-gray-50:hover { background-color: var(--bg-hover) !important; }
        .hover\\:bg-gray-100:hover { background-color: var(--bg-hover) !important; }
        .hover\\:bg-gray-200:hover { background-color: var(--bg-hover) !important; }
        .hover\\:text-gray-900:hover { color: var(--text-primary) !important; }
        .hover\\:text-gray-800:hover { color: var(--text-primary) !important; }
        
        /* Typography System Override */
        .ios-footnote { color: var(--text-secondary) !important; }
        .ios-caption { color: var(--text-tertiary) !important; }
        .ios-callout { color: var(--text-secondary) !important; }
        .ios-subhead { color: var(--text-tertiary) !important; }
        .ios-headline { color: var(--text-primary) !important; }
        .ios-body { color: var(--text-secondary) !important; }
        
        /* Theme Color Overrides */
        .text-blue-600 { color: var(--ios-blue) !important; }
        .text-blue-800 { color: #0056CC !important; }
        .hover\\:text-blue-800:hover { color: #003D99 !important; }
        .bg-blue-600 { background-color: var(--ios-blue) !important; }
        .hover\\:bg-blue-700:hover { background-color: #0056CC !important; }

        /* Dark Theme Button Styles */
        .ios-button-primary {
            background: var(--ios-blue);
            color: white !important;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-height: 48px;
            text-decoration: none;
            letter-spacing: 0.3px;
            box-shadow: 0 1px 3px rgba(0, 122, 255, 0.2);
        }
        .ios-button-primary * {
            color: white !important;
        }
        .ios-button-primary:hover {
            background: #0056CC;
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(0, 122, 255, 0.3);
        }
        .ios-button-primary:active {
            transform: translateY(0);
            background: #003D99;
        }

        .ios-button-secondary {
            background: rgba(0, 122, 255, 0.1);
            color: var(--ios-blue) !important;
            border: 1px solid rgba(0, 122, 255, 0.2);
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-height: 48px;
            text-decoration: none;
            letter-spacing: 0.3px;
        }
        .ios-button-secondary * {
            color: var(--ios-blue) !important;
        }
        .ios-button-secondary:hover {
            background: rgba(0, 122, 255, 0.15);
            border-color: rgba(0, 122, 255, 0.3);
            transform: translateY(-1px);
        }
        .ios-button-secondary:active {
            transform: translateY(0);
        }

        /* Tertiary button for less important actions */
        .ios-button-tertiary {
            background: transparent;
            color: var(--text-secondary) !important;
            border: 1px solid var(--border-secondary);
            border-radius: 8px;
            font-size: 15px;
            font-weight: 500;
            padding: 10px 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            min-height: 40px;
            text-decoration: none;
        }
        .ios-button-tertiary * {
            color: var(--text-secondary) !important;
        }
        .ios-button-tertiary:hover {
            background: var(--bg-hover);
            border-color: var(--border-primary);
            color: var(--text-primary) !important;
        }
        .ios-button-tertiary:hover * {
            color: var(--text-primary) !important;
        }

        .ios-button-destructive {
            background: var(--ios-red);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 17px;
            font-weight: 600;
            padding: 16px 24px;
            min-height: 52px;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 2px 8px rgba(255, 59, 48, 0.25);
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            letter-spacing: 0.3px;
        }
        .ios-button-destructive:hover {
            background: #E5342B;
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(255, 59, 48, 0.35);
        }

        /* Compact Button for Headers */
        .ios-button-compact {
            padding: 8px 16px;
            min-height: 36px;
            font-size: 15px;
            border-radius: 8px;
            font-weight: 500;
        }

        /* Dark Theme Card Styles */
        .ios-card {
            background: var(--bg-card);
            border-radius: 12px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-primary);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .ios-card:hover {
            background-color: rgba(0, 0, 0, 0.02);
        }
        
        /* WCAG 2.2 AA COMPLIANT HOVER SYSTEM */
        
        /* Universal Hover Rules - WCAG AA Compliant */
        button:hover { 
            color: var(--text-primary) !important; 
            background-color: var(--bg-hover) !important;
        }
        .cursor-pointer:hover { 
            color: var(--text-primary) !important; 
            background-color: var(--bg-hover) !important;
        }
        
        /* Fix Critical Hover Contrast Violations */
        .hover\\:bg-gray-200:hover {
            background-color: var(--bg-hover) !important;
            color: var(--text-primary) !important;
        }
        
        .hover\\:bg-gray-50:hover {
            background-color: var(--bg-hover) !important;
            color: var(--text-primary) !important;
        }
        
        .hover\\:bg-red-50:hover {
            background-color: rgba(239, 68, 68, 0.2) !important;
            color: var(--text-primary) !important;
        }
        
        .hover\\:bg-blue-50:hover {
            background-color: rgba(59, 130, 246, 0.2) !important;
            color: var(--text-primary) !important;
        }
        
        /* Material Icons in Hover States - WCAG Compliant */
        .material-icons {
            color: var(--text-secondary) !important;
        }
        
        button .material-icons {
            color: inherit !important;
        }
        
        button:hover .material-icons {
            color: var(--text-primary) !important;
        }
        
        /* Trip List Item Hover States - WCAG AA Compliant */
        .cursor-pointer.transition-colors:hover {
            background-color: var(--bg-hover) !important;
            border-color: var(--border-secondary) !important;
            color: var(--text-primary) !important;
        }
        
        /* Rounded Button Hover States - Fix Critical Contrast Issues */
        .rounded-full.hover\\:bg-gray-200:hover {
            background-color: var(--bg-hover) !important;
            color: var(--text-primary) !important;
        }
        
        .rounded-full:hover .material-icons {
            color: var(--text-primary) !important;
        }
        /* WCAG 2.2 AA COMPLIANT FOCUS SYSTEM */
        input:focus,
        select:focus,
        textarea:focus {
            outline: 3px solid var(--primary-green) !important;
            outline-offset: 2px !important;
            border-color: var(--primary-green) !important;
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.2) !important;
        }
        
        button:focus,
        .cursor-pointer:focus,
        [role="button"]:focus {
            outline: 3px solid var(--primary-green) !important;
            outline-offset: 2px !important;
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.2) !important;
        }
        
        /* Focus-visible for better keyboard navigation */
        button:focus-visible,
        .cursor-pointer:focus-visible,
        [role="button"]:focus-visible {
            outline: 3px solid var(--primary-green) !important;
            outline-offset: 2px !important;
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.3) !important;
        }
        
        /* Remove focus outline for mouse users */
        button:focus:not(:focus-visible),
        .cursor-pointer:focus:not(:focus-visible),
        [role="button"]:focus:not(:focus-visible) {
            outline: none !important;
            box-shadow: none !important;
        }
        
        /* Ensure sufficient contrast for all interactive elements */
        .cursor-pointer:hover {
            color: var(--text-primary) !important;
        }
        
        /* Fix empty state text contrast */
        .text-center.py-8.text-gray-500,
        .text-center.py-6.text-gray-500,
        .text-center.py-4.text-gray-500 {
            color: var(--text-tertiary) !important;
        }
        
        /* Fix task and shopping card backgrounds for dark theme */
        .bg-white {
            background-color: var(--bg-card) !important;
        }
        
        .border-gray-200 {
            border-color: var(--border-primary) !important;
        }
        
        .border-gray-300 {
            border-color: var(--border-secondary) !important;
        }
        
        .text-gray-900 {
            color: var(--text-primary) !important;
        }
        
        .text-gray-800 {
            color: var(--text-secondary) !important;
        }
        
        .text-red-600 {
            color: #ef4444 !important;
        }
        
        .bg-red-50 {
            background-color: rgba(239, 68, 68, 0.1) !important;
        }
        
        .border-red-200 {
            border-color: rgba(239, 68, 68, 0.3) !important;
        }
        
        /* Fix form placeholders and labels */
        input::placeholder,
        textarea::placeholder {
            color: var(--text-muted) !important;
        }
        
        /* Fix modal form styling */
        .modal-form input,
        .modal-form textarea,
        .modal-form select {
            background: var(--bg-secondary) !important;
            color: var(--text-primary) !important;
            border-color: var(--border-primary) !important;
        }
        
        /* Fix dietary restriction badges and orange elements */
        .bg-orange-100 {
            background-color: rgba(245, 158, 11, 0.2) !important;
        }
        
        .text-orange-800 {
            color: #f59e0b !important;
        }
        
        .text-orange-600 {
            color: #f59e0b !important;
        }
        
        /* WCAG 2.2 AA FORM ACCESSIBILITY */
        input, textarea, select {
            background: var(--bg-secondary) !important;
            color: var(--text-primary) !important;
            border-color: var(--border-primary) !important;
            border-width: 2px !important; /* Enhanced border for better visibility */
        }
        
        label {
            color: var(--text-primary) !important; /* Enhanced contrast for labels */
            font-weight: 500 !important; /* Better readability */
        }
        
        /* Enhanced Placeholder Contrast */
        input::placeholder,
        textarea::placeholder {
            color: var(--text-tertiary) !important; /* Better contrast than text-muted */
            opacity: 1 !important;
        }
        
        /* Form Validation States - WCAG Compliant */
        input:invalid,
        textarea:invalid,
        select:invalid {
            border-color: var(--ios-red) !important;
            box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2) !important;
        }
        
        input:valid,
        textarea:valid,
        select:valid {
            border-color: var(--ios-green) !important;
        }
        
        /* CRITICAL FIX: Radio Button Assignment Section Contrast */
        .border-gray-600 {
            border-color: var(--border-secondary) !important;
        }
        
        .border-blue-400 {
            border-color: var(--ios-blue) !important;
        }
        
        /* Radio Button Selected State Override */
        input[type="radio"]:checked + span,
        input[type="radio"]:checked ~ span {
            color: var(--text-primary) !important;
        }
        
        /* Radio Button Labels - WCAG AA Compliant */
        label[for] {
            color: var(--text-primary) !important;
        }
        
        /* Assignment Section Specific Fixes */
        .space-y-3 label {
            color: var(--text-primary) !important;
        }
        
        .space-y-3 label span {
            color: var(--text-primary) !important;
        }
        
        .space-y-3 label span.block {
            color: var(--text-secondary) !important;
        }
        
        /* ACCESSIBLE RADIO BUTTON STYLING */
        .space-y-2 > div {
            transition: all 0.2s ease !important;
        }
        
        .space-y-2 > div:hover {
            background-color: var(--bg-hover) !important;
            border-color: var(--ios-blue) !important;
        }
        
        .space-y-2 input[type="radio"]:checked + div,
        .space-y-2 input[type="radio"]:checked ~ div {
            background-color: rgba(59, 130, 246, 0.1) !important;
            border-color: var(--ios-blue) !important;
        }
        
        .space-y-2 input[type="radio"]:focus {
            outline: 3px solid var(--primary-green) !important;
            outline-offset: 2px !important;
        }
        
        /* Radio Button Visual Enhancement - Fixed */
        input[type="radio"] {
            -webkit-appearance: none !important;
            -moz-appearance: none !important;
            appearance: none !important;
            width: 20px !important;
            height: 20px !important;
            min-width: 20px !important;
            min-height: 20px !important;
            border: 2px solid #8E8E93 !important;
            border-radius: 50% !important;
            background: #FFFFFF !important;
            position: relative !important;
            cursor: pointer !important;
            margin: 0 !important;
            padding: 0 !important;
            flex-shrink: 0 !important;
        }
        
        input[type="radio"]:checked {
            border-color: #007AFF !important;
            background: #007AFF !important;
        }
        
        input[type="radio"]:checked::after {
            content: '' !important;
            position: absolute !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            width: 8px !important;
            height: 8px !important;
            border-radius: 50% !important;
            background: #FFFFFF !important;
            display: block !important;
        }
        
        input[type="radio"]:focus {
            outline: 2px solid #34C759 !important;
            outline-offset: 2px !important;
        }
        
        
        /* Fix checkbox styling */
        input[type="checkbox"] {
            accent-color: var(--primary-green) !important;
        }
        
        /* Ensure all text in cards is visible */
        .bg-white * {
            color: var(--text-primary) !important;
        }
        
        .bg-white .text-gray-500 {
            color: var(--text-tertiary) !important;
        }
        
        .bg-white .text-gray-600 {
            color: var(--text-secondary) !important;
        }
        
        /* Fix trip code section contrast */
        .bg-gray-50 {
            background-color: var(--bg-secondary) !important;
        }
        
        .text-gray-500 small,
        small.text-gray-500 {
            color: var(--text-tertiary) !important;
        }
        
        /* Fix specific trip code area styling */
        #modalTripCodeSection .bg-gray-50 {
            background-color: var(--bg-secondary) !important;
            border-color: var(--border-primary) !important;
        }
        
        #modalTripCodeSection .text-gray-500 {
            color: var(--text-tertiary) !important;
        }
        
        #modalTripCodeSection .material-icons.text-gray-500 {
            color: var(--text-tertiary) !important;
        }
        
        /* iOS Variables Already Defined Above - No Duplicates Needed */
        
        /* SYSTEMATIC HARDCODED STYLE OVERRIDES */
        
        /* Background Color Overrides */
        [style*="background: #f3f4f6"] { background: var(--bg-tertiary) !important; }
        [style*="background: white"] { background: var(--bg-card) !important; color: var(--text-primary) !important; }
        [style*="background: #E5E5EA"] { background: var(--bg-secondary) !important; }
        [style*="background: #F0F9FF"] { background: var(--bg-secondary) !important; }
        [style*="background: #FFF3E0"] { background: rgba(245, 158, 11, 0.1) !important; }
        
        /* Text Color Overrides */
        [style*="color: #666"] { color: var(--text-tertiary) !important; }
        [style*="color: #333"] { color: var(--text-primary) !important; }
        [style*="color: #334155"] { color: var(--text-secondary) !important; }
        [style*="color: #0F172A"] { color: var(--text-primary) !important; }
        [style*="color: #1D1D1F"] { color: var(--text-primary) !important; }
        [style*="color: #8E8E93"] { color: var(--text-muted) !important; }
        
        /* Border Color Overrides */
        [style*="border: 1px solid #d1d5db"] { border-color: var(--border-primary) !important; }
        [style*="border: 1px solid #E5E5EA"] { border-color: var(--border-primary) !important; }
        [style*="border: 2px solid #E5E5EA"] { border-color: var(--border-primary) !important; }
        [style*="border: 2px solid #C7C7CC"] { border-color: var(--border-secondary) !important; }
        [style*="border-bottom: 1px solid #F2F2F7"] { border-color: var(--border-primary) !important; }
        [style*="border-bottom: 1px solid #f3f4f6"] { border-color: var(--border-primary) !important; }
        
        /* Specific Color Overrides */
        [style*="color: #007AFF"] { color: var(--ios-blue) !important; }
        [style*="color: #0EA5E9"] { color: var(--accent-blue) !important; }
        [style*="color: #FF9500"] { color: var(--warning-orange) !important; }
        [style*="color: #F59E0B"] { color: var(--warning-orange) !important; }
        [style*="color: #3B82F6"] { color: var(--accent-blue) !important; }
        
        /* CRITICAL: Force visibility for dynamically generated content */
        .text-gray-800.font-medium { color: var(--text-primary) !important; }
        .text-gray-500.block { color: var(--text-tertiary) !important; }
        .text-sm.text-gray-500 { color: var(--text-tertiary) !important; }
        
        /* Radio button labels and descriptions */
        label span.font-medium { color: var(--text-primary) !important; }
        label span.block { color: var(--text-tertiary) !important; }
        
        /* Ensure all form labels are visible */
        input[type="radio"] + span { color: var(--text-primary) !important; }
        input[type="radio"] + span span { color: var(--text-tertiary) !important; }
        
        /* CRITICAL: Force trip cards to use dark theme */
        .trip-card.ios-card {
            background: var(--bg-card) !important;
            color: var(--text-primary) !important;
        }
        
        .trip-card .ios-headline {
            color: var(--text-primary) !important;
        }
        
        .trip-card .ios-callout {
            color: var(--text-secondary) !important;
        }

        .ios-card-large {
            background: var(--bg-card);
            border-radius: 16px;
            box-shadow: var(--shadow-lg);
            border: 0.5px solid var(--ios-gray-4);
            overflow: hidden;
            padding: 24px;
        }

        /* iOS List Styles */
        .ios-list {
            background: var(--ios-secondary-grouped-background);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--ios-shadow-1);
            border: 0.5px solid var(--ios-gray-4);
        }

        .ios-list-item {
            padding: 16px 20px;
            border-bottom: 0.5px solid var(--ios-gray-5);
            transition: background-color 0.2s ease;
            cursor: pointer;
        }
        .ios-list-item:last-child {
            border-bottom: none;
        }
        .ios-list-item:hover {
            background: var(--ios-gray-6);
        }
        .ios-list-item:active {
            background: var(--ios-gray-5);
        }

        /* iOS Form Controls */
        .ios-input {
            background: var(--ios-secondary-grouped-background);
            border: 1px solid var(--ios-gray-4);
            border-radius: 10px;
            padding: 12px 16px;
            font-size: 17px;
            color: var(--ios-label);
            transition: all 0.2s ease;
            min-height: 44px;
            -webkit-appearance: none;
            appearance: none;
        }
        .ios-input:focus {
            outline: none;
            border-color: var(--ios-blue);
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        .ios-select {
            background: var(--ios-secondary-grouped-background);
            border: 1px solid var(--ios-gray-4);
            border-radius: 10px;
            padding: 12px 16px;
            font-size: 17px;
            color: var(--ios-label);
            min-height: 44px;
            -webkit-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23007AFF' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 20px;
            padding-right: 40px;
        }

        /* Dark Theme Typography */
        .ios-title-1 {
            font-size: 32px;
            font-weight: 800;
            line-height: 1.2;
            color: var(--text-primary);
            letter-spacing: -0.5px;
        }
        .ios-title-2 {
            font-size: 24px;
            font-weight: 700;
            line-height: 1.25;
            color: var(--text-primary);
            letter-spacing: -0.3px;
        }
        .ios-title-3 {
            font-size: 20px;
            font-weight: 600;
            line-height: 1.3;
            color: var(--text-primary);
            letter-spacing: -0.2px;
        }
        .ios-headline {
            font-size: 17px;
            font-weight: 600;
            line-height: 1.35;
            color: var(--text-primary);
        }
        .ios-body {
            font-size: 16px;
            font-weight: 400;
            line-height: 1.5;
            color: var(--text-secondary);
        }
        .ios-callout {
            font-size: 16px;
            font-weight: 400;
            line-height: 1.4;
            color: var(--text-secondary);
        }
        .ios-subhead {
            font-size: 15px;
            font-weight: 400;
            line-height: 1.4;
            color: var(--text-tertiary);
        }
        .ios-footnote {
            font-size: 13px;
            font-weight: 400;
            line-height: 1.38;
            color: var(--ios-secondary-label);
        }
        .ios-caption {
            font-size: 12px;
            font-weight: 400;
            line-height: 1.33;
            color: var(--ios-tertiary-label);
        }

        .hidden { display: none !important; }
        
        /* Professional Error/Success Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            min-width: 300px;
            max-width: 400px;
            padding: 16px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transform: translateX(100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 10000;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .notification.show {
            transform: translateX(0);
        }
        .notification.error {
            background: linear-gradient(135deg, rgba(255, 59, 48, 0.95) 0%, rgba(255, 45, 85, 0.95) 100%);
            color: white;
            border-color: rgba(255, 255, 255, 0.3);
        }
        .notification.success {
            background: linear-gradient(135deg, rgba(52, 199, 89, 0.95) 0%, rgba(48, 209, 88, 0.95) 100%);
            color: white;
            border-color: rgba(255, 255, 255, 0.3);
        }
        .notification.info {
            background: linear-gradient(135deg, rgba(0, 122, 255, 0.95) 0%, rgba(64, 156, 255, 0.95) 100%);
            color: white;
            border-color: rgba(255, 255, 255, 0.3);
        }
        .notification .notification-content {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }
        .notification .notification-icon {
            font-size: 20px;
            margin-top: 2px;
            flex-shrink: 0;
        }
        .notification .notification-text {
            flex: 1;
            font-size: 15px;
            font-weight: 500;
            line-height: 1.4;
        }
        .notification .notification-close {
            background: none;
            border: none;
            color: inherit;
            font-size: 18px;
            cursor: pointer;
            padding: 0;
            margin-left: 8px;
            opacity: 0.8;
            transition: opacity 0.2s ease;
        }
        .notification .notification-close:hover {
            opacity: 1;
        }
        
        /* Professional Modal System */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            padding: 20px;
        }
        
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-container {
            background: var(--bg-modal);
            border-radius: 16px;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-primary);
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow: hidden;
            transform: scale(0.9) translateY(20px);
            transition: all 0.3s ease;
        }
        
        .modal-overlay.show .modal-container {
            transform: scale(1) translateY(0);
        }
        
        .modal-header {
            padding: 24px 24px 0 24px;
            border-bottom: 1px solid var(--border-primary);
            background: var(--bg-modal);
            border-radius: 16px 16px 0 0;
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
            padding-right: 40px;
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--ios-gray-5);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--ios-gray-1);
        }
        
        .modal-close:hover {
            background: var(--ios-gray-4);
            transform: scale(1.1);
        }
        
        .modal-body {
            padding: 24px;
            max-height: calc(90vh - 140px);
            overflow-y: auto;
        }
        
        .modal-footer {
            padding: 0 24px 24px 24px;
            border-top: 1px solid var(--border-primary);
            background: var(--bg-modal);
            border-radius: 0 0 16px 16px;
        }
        
        /* Modal form styling */
        .modal-form .form-group {
            margin-bottom: 20px;
        }
        
        .modal-form label {
            display: block;
            font-size: 15px;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        
        .modal-form input,
        .modal-form textarea,
        .modal-form select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border-primary);
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
            background: var(--bg-secondary);
            color: var(--text-primary);
            transition: all 0.2s ease;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
        
        .modal-form select {
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
            padding-right: 40px;
            cursor: pointer;
        }
        
        .modal-form input:focus,
        .modal-form textarea:focus,
        .modal-form select:focus {
            outline: none;
            border-color: var(--border-accent);
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.2);
        }
        
        .modal-form select:hover {
            border-color: var(--border-secondary);
        }
        
        /* iOS-style checkbox styling */
        .modal-form input[type="checkbox"] {
            width: 18px;
            height: 18px;
            border: 2px solid var(--ios-gray-4);
            border-radius: 4px;
            background: white;
            cursor: pointer;
            position: relative;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            transition: all 0.2s ease;
        }
        
        .modal-form input[type="checkbox"]:checked {
            background: var(--ios-blue);
            border-color: var(--ios-blue);
        }
        
        .modal-form input[type="checkbox"]:checked::after {
            content: '';
            position: absolute;
            top: 1px;
            left: 5px;
            width: 6px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }
        
        .modal-form input[type="checkbox"]:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }
        
        /* Number input styling */
        .modal-form input[type="number"] {
            -moz-appearance: textfield;
            appearance: textfield;
        }
        
        .modal-form input[type="number"]::-webkit-outer-spin-button,
        .modal-form input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        /* Enhanced Date and time input styling */
        .modal-form input[type="date"],
        .modal-form input[type="time"] {
            cursor: pointer;
            position: relative;
            padding-right: 50px;
            background: white;
            border: 2px solid var(--ios-gray-4);
            border-radius: 12px;
            font-size: 16px;
            font-weight: 500;
            color: var(--ios-label);
            transition: all 0.3s ease;
        }
        
        .modal-form input[type="date"]:focus,
        .modal-form input[type="time"]:focus {
            border-color: var(--ios-blue);
            box-shadow: 0 0 0 4px rgba(0, 122, 255, 0.1);
            outline: none;
        }
        
        .modal-form input[type="date"]::-webkit-calendar-picker-indicator,
        .modal-form input[type="time"]::-webkit-calendar-picker-indicator {
            cursor: pointer;
            position: absolute;
            right: 12px;
            width: 20px;
            height: 20px;
            background: var(--ios-blue);
            border-radius: 4px;
            filter: none;
            opacity: 0.8;
            transition: all 0.2s ease;
        }
        
        .modal-form input[type="date"]:hover::-webkit-calendar-picker-indicator,
        .modal-form input[type="time"]:hover::-webkit-calendar-picker-indicator {
            opacity: 1;
            transform: scale(1.1);
        }
        
        /* Custom calendar dropdown styling */
        .modal-form input[type="date"]::-webkit-datetime-edit {
            padding: 0;
            font-size: 16px;
            font-weight: 500;
        }
        
        .modal-form input[type="date"]::-webkit-datetime-edit-fields-wrapper {
            padding: 0;
        }
        
        .modal-form input[type="date"]::-webkit-datetime-edit-month-field,
        .modal-form input[type="date"]::-webkit-datetime-edit-day-field,
        .modal-form input[type="date"]::-webkit-datetime-edit-year-field {
            padding: 4px 6px;
            border-radius: 6px;
            background: rgba(0, 122, 255, 0.05);
            margin: 0 2px;
            font-weight: 600;
            color: var(--ios-blue);
        }
        
        .modal-form input[type="date"]::-webkit-datetime-edit-text {
            color: var(--ios-gray-2);
            font-weight: 500;
        }
        
        .modal-form textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        .modal-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }
        
        /* Mobile modal adjustments */
        @media (max-width: 768px) {
            .modal-overlay {
                padding: 10px;
            }
            
            .modal-container {
                max-height: 95vh;
                border-radius: 12px;
            }
            
            .modal-header,
            .modal-body,
            .modal-footer {
                padding-left: 16px;
                padding-right: 16px;
            }
            
            .modal-actions {
                flex-direction: column;
            }
            
            .modal-actions button {
                width: 100%;
            }
        }
        
        /* Custom textarea styling */
        textarea {
            font-family: inherit;
            line-height: 1.5;
            padding: 12px;
            resize: vertical;
        }

        /* Mobile-First Optimizations - Fixed Layout */
        @media (max-width: 768px) {
            .container { 
                padding-left: 12px; 
                padding-right: 12px; 
            }
            
            /* Better mobile cards */
            .ios-card { 
                margin: 12px 0; 
                border-radius: 12px;
                padding: 16px !important;
            }
            .ios-card-large {
                margin: 12px 0;
                padding: 16px !important;
                border-radius: 12px;
            }
            
            /* Mobile typography - more readable */
            .ios-title-1 { 
                font-size: 24px; 
                line-height: 1.3;
                margin-bottom: 8px;
            }
            .ios-title-2 { 
                font-size: 20px; 
                line-height: 1.3;
            }
            .ios-title-3 { 
                font-size: 18px; 
                line-height: 1.3;
            }
            .ios-headline {
                font-size: 16px;
                line-height: 1.4;
            }
            .ios-callout {
                font-size: 15px;
                line-height: 1.4;
            }
            
            /* Mobile button improvements */
            .ios-button-primary, .ios-button-secondary, .ios-button-destructive {
                border-radius: 10px;
                font-size: 16px;
                padding: 14px 20px;
                min-height: 48px;
                width: 100%;
                margin-bottom: 12px;
                letter-spacing: 0.2px;
            }
            
            /* Better mobile notification positioning */
            .notification {
                top: 10px;
                right: 10px;
                left: 10px;
                max-width: none;
                margin: 0 auto;
            }
            
            /* Compact buttons for tight spaces */
            .ios-button-compact {
                padding: 8px 12px;
                min-height: 36px;
                font-size: 14px;
                width: auto;
                margin-bottom: 0;
            }
            
            /* iOS-style checkbox - Override Tailwind */
            input[type="checkbox"].ios-checkbox {
                appearance: none !important;
                -webkit-appearance: none !important;
                -moz-appearance: none !important;
                width: 20px !important;
                height: 20px !important;
                min-width: 20px !important;
                min-height: 20px !important;
                max-width: 20px !important;
                max-height: 20px !important;
                border: 2px solid #C7C7CC !important;
                border-radius: 4px !important;
                background: white !important;
                cursor: pointer !important;
                position: relative !important;
                transition: all 0.2s ease !important;
                flex-shrink: 0 !important;
                margin: 0 !important;
                padding: 0 !important;
                display: inline-block !important;
                vertical-align: middle !important;
            }
            
            input[type="checkbox"].ios-checkbox:checked {
                background: var(--ios-blue) !important;
                border-color: var(--ios-blue) !important;
            }
            
            input[type="checkbox"].ios-checkbox:checked::after {
                content: '' !important;
                position: absolute !important;
                left: 5px !important;
                top: 1px !important;
                width: 6px !important;
                height: 10px !important;
                border: solid white !important;
                border-width: 0 2px 2px 0 !important;
                transform: rotate(45deg) !important;
                display: block !important;
            }
            
            input[type="checkbox"].ios-checkbox:focus {
                outline: none !important;
                box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.2) !important;
            }
            
            /* Custom checkbox component */
            .custom-checkbox {
                width: 20px;
                height: 20px;
                border: 2px solid #C7C7CC;
                border-radius: 4px;
                background: white;
                cursor: pointer;
                position: relative;
                transition: all 0.2s ease;
                flex-shrink: 0;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .custom-checkbox.checked {
                background: var(--ios-blue);
                border-color: var(--ios-blue);
            }
            
            .custom-checkbox .checkmark {
                color: white;
                font-size: 12px;
                font-weight: bold;
                line-height: 1;
            }
            
            /* iOS Toggle Switch */
            .ios-switch {
                width: 51px;
                height: 31px;
                background: #E5E5EA;
                border-radius: 16px;
                position: relative;
                cursor: pointer;
                transition: background-color 0.3s ease;
                flex-shrink: 0;
            }
            
            .ios-switch.on {
                background: var(--ios-green);
            }
            
            .ios-switch-thumb {
                width: 27px;
                height: 27px;
                background: white;
                border-radius: 50%;
                position: absolute;
                top: 2px;
                left: 2px;
                transition: transform 0.3s ease;
                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
            }
            
            .ios-switch.on .ios-switch-thumb {
                transform: translateX(20px);
            }
            
            /* Collapsible sections */
            .weather-section, .map-section {
                transition: all 0.3s ease;
                overflow: hidden;
            }
            
            .weather-section.collapsed, .map-section.collapsed {
                max-height: 0;
                opacity: 0;
                margin: 0;
                padding: 0;
            }
            
            /* Force proper padding for camping conditions */
            .camping-conditions-section {
                padding: 24px !important;
                margin-top: 24px !important;
                background: #F0F9FF !important;
                border: 1px solid #0EA5E9 !important;
                border-radius: 8px !important;
            }
            
            .camping-conditions-header {
                margin-bottom: 20px !important;
                display: flex !important;
                align-items: center !important;
            }
            
            .camping-conditions-grid {
                display: grid !important;
                grid-template-columns: 1fr !important;
                gap: 20px !important;
            }
            
            @media (min-width: 768px) {
                .camping-conditions-grid {
                    grid-template-columns: 1fr 1fr !important;
                }
            }
            
            .camping-condition-item {
                display: flex !important;
                align-items: center !important;
                padding: 12px 0 !important;
            }
            
            /* Better mobile spacing */
            .mb-8 { margin-bottom: 20px; }
            .mb-6 { margin-bottom: 16px; }
            .mb-4 { margin-bottom: 12px; }
            .mb-3 { margin-bottom: 8px; }
            
            /* Mobile grid fixes */
            .grid {
                gap: 12px;
            }
            
            /* Header improvements */
            .ios-title-1 {
                font-size: 22px;
            }
            .ios-subhead {
                font-size: 14px;
                margin-top: 4px;
            }
            
            /* Form improvements */
            .ios-input, .ios-select {
                font-size: 16px; /* Prevents zoom */
                padding: 12px 14px;
                border-radius: 8px;
            }
            
            /* Better mobile padding */
            .p-5 { padding: 16px !important; }
            .p-4 { padding: 12px !important; }
            .px-4 { padding-left: 12px !important; padding-right: 12px !important; }
            
            /* Text truncation for mobile */
            .truncate-mobile {
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                max-width: 200px;
            }
        }

        /* Text truncation utilities */
        .truncate-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .truncate-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        /* Mobile-first responsive grid */
        @media (max-width: 640px) {
            .grid-cols-1.md\:grid-cols-2 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
            .grid-cols-1.md\:grid-cols-3 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
        }
        
        .material-icons { font-size: inherit; }
        .form-input {
            height: 42px;
            padding: 0 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.2s ease;
            background-color: white;
            appearance: none;
        }
        .form-input:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }
        .form-textarea {
            min-height: 84px;
            padding: 12px;
            resize: vertical;
        }

        /* MOBILE UI IMPROVEMENTS */

        /* iOS Switch Component */
        .ios-switch {
            position: relative;
            display: inline-block;
            width: 51px;
            height: 31px;
        }

        .ios-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .ios-switch-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #E5E5EA;
            transition: .3s;
            border-radius: 31px;
        }

        .ios-switch-slider:before {
            position: absolute;
            content: "";
            height: 27px;
            width: 27px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .3s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .ios-switch input:checked + .ios-switch-slider {
            background-color: #34C759;
        }

        .ios-switch input:checked + .ios-switch-slider:before {
            transform: translateX(20px);
        }

        /* WCAG 2.2 AA MOBILE ACCESSIBILITY */
        @media (max-width: 768px) {
            .ios-button-primary, .ios-button-secondary {
                width: 100%;
                padding: 16px 20px;
                font-size: 17px;
                font-weight: 600;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
                min-height: 50px; /* Exceeds WCAG minimum 44px */
                transition: all 0.2s ease;
                touch-action: manipulation; /* Prevent zoom on double-tap */
            }
            
            /* Mobile Interactive Elements - WCAG Compliant Touch Targets */
            button, .cursor-pointer, [role="button"] {
                min-height: 44px !important;
                min-width: 44px !important;
                touch-action: manipulation;
            }
            
            /* Mobile Icon Buttons - Ensure Adequate Touch Target */
            .rounded-full {
                min-height: 44px !important;
                min-width: 44px !important;
                padding: 10px !important;
            }
            
            /* Mobile Form Elements - Enhanced Touch Targets */
            input, select, textarea {
                min-height: 44px !important;
                padding: 12px 16px !important;
                font-size: 16px !important; /* Prevent zoom on iOS */
            }
            
            /* Mobile Focus States - Enhanced Visibility */
            button:focus-visible,
            .cursor-pointer:focus-visible,
            [role="button"]:focus-visible {
                outline: 4px solid var(--primary-green) !important;
                outline-offset: 3px !important;
                box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.4) !important;
            }

            .ios-button-primary {
                background: var(--ios-blue) !important;
                color: white !important;
                border: none;
                box-shadow: 0 2px 8px rgba(0, 122, 255, 0.25);
            }

            .ios-button-primary * {
                color: white !important;
            }

            .ios-button-primary:hover {
                transform: translateY(-1px);
                box-shadow: 0 3px 12px rgba(0, 122, 255, 0.35);
                background: #0056CC !important;
            }

            .ios-button-secondary {
                background: rgba(0, 122, 255, 0.1) !important;
                color: var(--ios-blue) !important;
                border: 1px solid rgba(0, 122, 255, 0.2);
            }

            .ios-button-secondary * {
                color: var(--ios-blue) !important;
            }

            .ios-button-secondary:hover {
                background: rgba(0, 122, 255, 0.15) !important;
                border-color: rgba(0, 122, 255, 0.3);
                transform: translateY(-1px);
            }

            /* Mobile Action Buttons Specific Styling */
            .mobile-action-buttons {
                width: 100%;
                margin-top: 16px;
            }

            .mobile-action-buttons .ios-button-compact {
                padding: 18px 24px;
                font-size: 16px;
                font-weight: 700;
                min-height: 56px;
            }

            /* Mobile Full Width Buttons */
            .mobile-full-width-btn {
                padding: 16px 24px !important;
                font-size: 16px !important;
                font-weight: 700 !important;
                min-height: 52px !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }

            /* Mobile Trip Action Buttons */
            .mobile-trip-actions .ios-button-primary {
                padding: 18px 24px !important;
                font-size: 16px !important;
                min-height: 56px !important;
                width: 100% !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }

            .mobile-trip-actions {
                display: flex !important;
                flex-direction: column !important;
                gap: 12px !important;
                width: 100% !important;
            }

            /* Force all buttons to be truly 100% width on mobile */
            @media (max-width: 768px) {
                .ios-button-primary, .ios-button-secondary {
                    width: 100% !important;
                    max-width: none !important;
                    margin-left: 0 !important;
                    margin-right: 0 !important;
                    box-sizing: border-box !important;
                }
                
                .mobile-action-buttons, .mobile-trip-actions {
                    width: 100% !important;
                }
                
                .mobile-action-buttons > *, .mobile-trip-actions > * {
                    width: 100% !important;
                    flex: none !important;
                }
                
                /* Ensure proper button spacing */
                .mb-3 {
                    margin-bottom: 12px !important;
                }
                
                /* Fix progress bars on mobile */
                .flex {
                    min-width: 0 !important;
                }
                
                .flex-1 {
                    min-width: 0 !important;
                    overflow: hidden !important;
                }
                
                /* Progress bar containers */
                .mb-4.p-3.rounded-lg,
                .mb-4.p-4.rounded-lg {
                    padding: 12px !important;
                    margin-bottom: 12px !important;
                    overflow: hidden !important;
                }
                
                /* Progress bar text */
                .text-sm.font-medium {
                    font-size: 12px !important;
                    line-height: 1.2 !important;
                    overflow: hidden !important;
                    text-overflow: ellipsis !important;
                    white-space: nowrap !important;
                }
                
                /* Progress bar percentage */
                .text-xs {
                    font-size: 10px !important;
                    flex-shrink: 0 !important;
                }
                
                /* Progress bar track */
                .bg-gray-200.rounded-full {
                    overflow: hidden !important;
                    width: 100% !important;
                    max-width: 100% !important;
                }
                
                /* Progress bar fill */
                .bg-gray-200.rounded-full > div {
                    max-width: 100% !important;
                    overflow: hidden !important;
                }
                
                /* Specific progress bar container fixes */
                .progress-bar-container {
                    max-width: 100% !important;
                    overflow: hidden !important;
                    box-sizing: border-box !important;
                }
                
                .progress-bar-container > div {
                    max-width: 100% !important;
                    overflow: hidden !important;
                    box-sizing: border-box !important;
                }
                
                /* Force all shopping/task containers to be properly contained */
                #userShoppingContainer,
                #userTasksContainer,
                [id^="shoppingList-"],
                [id^="tasksList-"] {
                    overflow: hidden !important;
                    box-sizing: border-box !important;
                    max-width: 100% !important;
                }
                
                /* Shopping and task cards */
                .ios-card {
                    overflow: hidden !important;
                    box-sizing: border-box !important;
                    max-width: 100% !important;
                }
            }

            /* Weather Forecast Mobile Improvements */
            .weather-forecast-scroll {
                scrollbar-width: thin;
                scrollbar-color: rgba(0, 122, 255, 0.3) transparent;
            }

            .weather-forecast-scroll::-webkit-scrollbar {
                height: 6px;
            }

            .weather-forecast-scroll::-webkit-scrollbar-track {
                background: rgba(0, 0, 0, 0.1);
                border-radius: 3px;
            }

            .weather-forecast-scroll::-webkit-scrollbar-thumb {
                background: rgba(0, 122, 255, 0.3);
                border-radius: 3px;
            }

            .weather-forecast-scroll::-webkit-scrollbar-thumb:hover {
                background: rgba(0, 122, 255, 0.5);
            }

            .weather-day-card {
                transition: background-color 0.2s ease;
            }

            .weather-day-card:hover {
                background-color: #f5f5f5 !important;
            }

            /* Weather Grid Layout */
            .weather-forecast-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
                gap: 12px;
            }

            @media (max-width: 768px) {
                .weather-forecast-grid {
                    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
                    gap: 8px;
                }
            }

            /* Profile Mobile Optimization */
            .profile-container {
                padding: 16px;
            }
            
            .profile-header {
                flex-direction: column;
                text-align: center;
                gap: 16px;
                padding: 24px;
                background: white;
                border-radius: 16px;
                box-shadow: 0 2px 12px rgba(0,0,0,0.08);
                margin-bottom: 20px;
            }
            
            .profile-avatar {
                width: 80px;
                height: 80px;
                margin: 0 auto;
                border-radius: 50%;
                background: linear-gradient(135deg, #007AFF, #5AC8FA);
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 32px;
                font-weight: 600;
            }
            
            .profile-section {
                margin-bottom: 20px;
                background: white;
                border-radius: 16px;
                padding: 20px;
                box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            }
            
            .profile-field {
                margin-bottom: 16px;
                padding-bottom: 16px;
                border-bottom: 1px solid #F2F2F7;
            }
            
            .profile-field:last-child {
                border-bottom: none;
                margin-bottom: 0;
                padding-bottom: 0;
            }
            
            .profile-field label {
                display: block;
                font-size: 13px;
                font-weight: 600;
                color: #8E8E93;
                margin-bottom: 4px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .profile-field .value {
                font-size: 16px;
                color: #1D1D1F;
                line-height: 1.4;
            }

            /* Trip Card Mobile Improvements */
            .ios-card {
                margin-bottom: 16px;
                border-radius: 16px;
                overflow: hidden;
            }
            
            .trip-actions {
                display: flex;
                flex-direction: column;
                gap: 8px;
                width: 100%;
                padding: 16px;
            }
            
            .trip-actions button {
                width: 100%;
                justify-content: center;
            }

            /* Modal Mobile Optimization */
            .modal-overlay {
                padding: 0;
                align-items: flex-end;
            }
            
            .modal-container {
                width: 100%;
                max-width: 100%;
                border-radius: 20px 20px 0 0;
                max-height: 90vh;
                overflow-y: auto;
                margin: 0;
            }
            
            .modal-actions {
                flex-direction: column;
                gap: 12px;
            }
            
            .modal-actions button {
                width: 100%;
            }

            /* Form Mobile Improvements */
            .form-input, .form-select, .form-textarea {
                font-size: 16px !important; /* Prevent zoom on iOS */
                padding: 14px 16px;
                border-radius: 12px;
                border: 2px solid #E5E5EA;
                transition: all 0.2s ease;
            }

            .form-input:focus, .form-select:focus, .form-textarea:focus {
                border-color: #007AFF;
                box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
            }

            /* Navigation Mobile */
            .nav-header {
                padding: 12px 16px;
                flex-wrap: wrap;
                gap: 12px;
            }
            
            .nav-actions {
                gap: 8px;
            }
            
            .nav-actions button {
                padding: 8px 12px;
                font-size: 14px;
                min-height: 36px;
            }

            /* Dashboard Mobile */
            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            /* Utility Classes */
            .mobile-full-width {
                width: 100% !important;
            }
            
            .mobile-text-center {
                text-align: center !important;
            }
        }
        
        /* MOBILE-FIRST BUTTON SYSTEM */
        
        /* Mobile Button Base Styles */
        .mobile-button-primary,
        .mobile-button-secondary {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px 16px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            min-height: 44px;
            transition: all 0.2s ease;
            border: none;
            cursor: pointer;
        }
        
        .mobile-button-primary {
            background: var(--green) !important;
            color: #000 !important;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .mobile-button-primary * {
            color: #000 !important;
        }
        
        .mobile-button-primary:hover {
            background: var(--green-light);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .mobile-button-secondary {
            background: var(--bg-tertiary);
            color: var(--text-white);
            border: 1px solid var(--border-secondary);
            font-weight: 500;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .mobile-button-secondary:hover {
            background: var(--bg-hover);
            border-color: var(--green);
            color: var(--text-white);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        /* Button Groups - Mobile-First */
        .button-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
        }
        
        .button-group > * {
            flex: none;
            width: 100%;
        }
        
        /* Desktop Button Layout */
        @media (min-width: 640px) {
            .button-group {
                flex-direction: row;
                gap: 12px;
            }
            
            .button-group > * {
                flex: 1;
                width: auto;
            }
        }
        
        /* Mobile Text Truncation */
        .mobile-truncate {
            max-width: 120px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        @media (min-width: 640px) {
            .mobile-truncate {
                max-width: none;
            }
        }
        
        /* Mobile Card Improvements */
        @media (max-width: 640px) {
            .ios-card {
                margin-bottom: 12px !important;
                padding: 16px !important;
                border-radius: 12px !important;
            }
            
            .ios-card-large {
                padding: 20px !important;
            }
            
            /* Mobile Typography Scale */
            .ios-title-1 { font-size: 24px !important; }
            .ios-title-2 { font-size: 20px !important; }
            .ios-title-3 { font-size: 18px !important; }
            .ios-headline { font-size: 16px !important; }
            .ios-callout { font-size: 15px !important; }
            .ios-footnote { font-size: 13px !important; }
            .ios-caption { font-size: 12px !important; }
            
            /* Mobile Spacing */
            .mb-6 { margin-bottom: 16px !important; }
            .mb-8 { margin-bottom: 20px !important; }
            .p-6 { padding: 16px !important; }
            .p-4 { padding: 12px !important; }
            
            /* Mobile Grid Improvements */
            .grid-cols-1.lg\\:grid-cols-3 {
                grid-template-columns: 1fr !important;
                gap: 12px !important;
            }
        }
        
        /* Trip List Item Hover States */
        .cursor-pointer.transition-colors:hover {
            background-color: var(--bg-hover) !important;
            border-color: var(--border-light) !important;
        }
        
        .cursor-pointer.transition-colors:hover * {
            color: var(--text-white) !important;
        }
        
        .cursor-pointer.transition-colors:hover .material-icons {
            color: var(--text-light) !important;
        }
        
        /* Map Container & Button Layout Fixes */
        .map-container {
            overflow: hidden;
            border-radius: 12px;
            position: relative;
        }
        
        .map-container #trip-detail-map {
            display: block;
            position: relative;
            overflow: hidden;
        }
        
        /* Ensure buttons are properly positioned below map */
        .button-group {
            margin-top: 16px !important;
            position: relative;
            z-index: 10;
            clear: both;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        @media (min-width: 640px) {
            .button-group {
                flex-direction: row;
                gap: 12px;
            }
        }
        
        /* Fix hover states for trip details button */
        #toggleTripDetails button:hover {
            background-color: transparent !important;
        }
        
        /* Ensure map doesn't overflow its container */
        .leaflet-container {
            border-radius: 12px;
            overflow: hidden;
        }
        
        /* Ensure Leaflet controls are visible and properly styled */
        .leaflet-control-zoom {
            visibility: visible !important;
            display: block !important;
            opacity: 1 !important;
            z-index: 1000 !important;
        }
        
        .leaflet-control-zoom a {
            background-color: white !important;
            color: #333 !important;
            border: 1px solid #ccc !important;
            width: 30px !important;
            height: 30px !important;
            line-height: 30px !important;
            text-align: center !important;
            text-decoration: none !important;
            font-size: 18px !important;
            font-weight: bold !important;
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        .leaflet-control-zoom a:hover {
            background-color: #f4f4f4 !important;
            color: #000 !important;
        }
        
        .leaflet-control-zoom-in {
            border-bottom: none !important;
            border-radius: 4px 4px 0 0 !important;
        }
        
        .leaflet-control-zoom-out {
            border-radius: 0 0 4px 4px !important;
        }
        
        /* Ensure all Leaflet controls are visible */
        .leaflet-control {
            visibility: visible !important;
            display: block !important;
            opacity: 1 !important;
            z-index: 1000 !important;
        }
        
        /* Enhanced Header Styling */
        #headerUserSection button {
            white-space: nowrap;
            font-weight: 600;
        }
        
        #headerUserProfileBtn {
            min-width: 140px;
            background: var(--bg-tertiary) !important;
            border: 1px solid var(--border-secondary) !important;
        }
        
        #headerUserProfileBtn * {
            color: var(--text-white) !important;
            font-weight: 700 !important;
        }
        
        #headerLogoutBtn {
            min-width: 100px;
        }
        
        /* Ensure header buttons are always visible */
        #headerUserSection .mobile-button-secondary {
            background: var(--bg-tertiary) !important;
            border-color: var(--border-secondary) !important;
            color: var(--text-white) !important;
        }
        
        #headerUserSection .mobile-button-secondary:hover {
            background: var(--bg-hover) !important;
            border-color: var(--green) !important;
        }
        
        /* Force header branding visibility */
        .header-branding {
            display: none !important;
        }
        
        @media (min-width: 640px) {
            .header-branding {
                display: flex !important;
                align-items: center;
            }
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="container mx-auto px-3 py-4 sm:px-4 sm:py-6" style="max-width: 1200px;">
        <!-- Enhanced Header -->
        <div class="flex justify-between items-center mb-6 p-6" style="background: var(--bg-secondary); border-radius: 12px; border: 1px solid var(--border-primary);">
            <!-- Desktop: Show branding, Mobile: Hide branding -->
            <div class="min-w-0 flex-1">
                <h1 class="text-xl font-bold header-branding" style="color: var(--text-white) !important;">
                    <span class="material-icons mr-3" style="font-size: 28px; color: var(--green) !important;">nature</span>
                    <span class="truncate" style="color: var(--text-white) !important;">GoTogether</span>
                </h1>
            </div>
            
            <!-- User section with improved styling -->
            <div id="headerUserSection" class="hidden w-full sm:w-auto flex items-center justify-between sm:justify-end gap-3">
                <div class="flex items-center gap-3 flex-1 sm:flex-none">
                    <button id="headerUserProfileBtn" class="mobile-button-secondary flex-1 sm:flex-none">
                        <span class="material-icons mr-2">account_circle</span>
                        <span id="headerUserName" class="truncate max-w-32 sm:max-w-none"></span>
                    </button>
                    <button id="headerLogoutBtn" class="mobile-button-secondary">
                        <span class="material-icons">logout</span>
                        <span class="hidden sm:inline ml-2">Sign Out</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- iOS Auth Container -->
        <div id="authContainer" class="max-w-md mx-auto ios-card-large">
            <!-- Login Form -->
            <div id="loginForm">
                <h2 class="ios-title-2 mb-6 text-center">Sign In</h2>
                <form id="loginFormElement">
                    <div class="mb-4">
                        <label for="loginEmail" class="block text-sm font-medium mb-2" style="color: var(--text-secondary);">Email</label>
                        <input type="email" id="loginEmail" required
                               class="w-full form-input">
                    </div>
                    <div class="mb-6">
                        <label for="loginPassword" class="block text-sm font-medium mb-2" style="color: var(--text-secondary);">Password</label>
                        <input type="password" id="loginPassword" required
                               class="w-full form-input">
                    </div>
                    <button type="submit" 
                            class="w-full ios-button-primary">
                        Sign In
                    </button>
                </form>
                <p class="mt-4 text-center text-sm text-gray-600">
                    Don't have an account? 
                    <button id="showRegister" class="text-blue-600 hover:text-blue-800 font-medium">Sign up</button>
                </p>
            </div>

            <!-- Register Form -->
            <div id="registerForm" class="hidden">
                <div class="text-center mb-8">
                    <h2 class="ios-title-1 text-gray-900 mb-2">Join GoTogether</h2>
                    <p class="ios-body text-gray-600">Connect with fellow campers and plan amazing outdoor adventures</p>
                </div>
                
                <form id="registerFormElement" class="space-y-6">
                    <!-- Essential Information -->
                    <div class="ios-card">
                        <div class="p-6">
                            <h3 class="ios-title-3 mb-4 flex items-center">
                                <span class="material-icons mr-3 text-blue-600" style="font-size: 20px;">person</span>
                                Account Information
                            </h3>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label for="registerFirstName" class="ios-footnote text-gray-600 mb-2 block">First Name *</label>
                                    <input type="text" id="registerFirstName" required maxlength="50"
                                           class="w-full form-input" placeholder="Enter your first name">
                                </div>
                                <div>
                                    <label for="registerLastName" class="ios-footnote text-gray-600 mb-2 block">Last Name *</label>
                                    <input type="text" id="registerLastName" required maxlength="50"
                                           class="w-full form-input" placeholder="Enter your last name">
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <label for="registerEmail" class="ios-footnote text-gray-600 mb-2 block">Email Address *</label>
                                <input type="email" id="registerEmail" required
                                       class="w-full form-input" placeholder="your@email.com">
                            </div>
                            
                            <div>
                                <label for="registerPassword" class="ios-footnote text-gray-600 mb-2 block">Password *</label>
                                <input type="password" id="registerPassword" required minlength="6"
                                       class="w-full form-input" placeholder="Create a secure password">
                                <p class="ios-caption text-gray-500 mt-2">Minimum 6 characters</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Camping Preferences -->
                    <div class="ios-card">
                        <div class="p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="ios-title-3 flex items-center">
                                    <span class="material-icons mr-3 text-green-600" style="font-size: 20px;">outdoor_grill</span>
                                    Camping Preferences
                                </h3>
                                <span class="ios-caption text-gray-500">Optional</span>
                            </div>
                            <p class="ios-footnote text-gray-600 mb-6">Help other campers find you for compatible trips</p>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label for="registerCamperType" class="ios-footnote text-gray-600 mb-2 block">Camping Style</label>
                                    <select id="registerCamperType" class="w-full form-input">
                                        <option value="">Choose your style...</option>
                                        <option value="tent"> Tent Camping</option>
                                        <option value="trailer"> Travel Trailer</option>
                                        <option value="rv"> RV/Motorhome</option>
                                        <option value="van"> Van/Camper Van</option>
                                        <option value="fifth_wheel"> 5th Wheel</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label for="registerGroupSize" class="ios-footnote text-gray-600 mb-2 block">Typical Group Size</label>
                                    <select id="registerGroupSize" class="w-full form-input">
                                        <option value="1">Just me (1 person)</option>
                                        <option value="2">Couple (2 people)</option>
                                        <option value="3">Small group (3-4 people)</option>
                                        <option value="5">Medium group (5-8 people)</option>
                                        <option value="9">Large group (9+ people)</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label for="registerDietary" class="ios-footnote text-gray-600 mb-2 block">Dietary Needs</label>
                                    <select id="registerDietary" class="w-full form-input">
                                        <option value="">No restrictions</option>
                                        <option value="vegetarian"> Vegetarian</option>
                                        <option value="vegan"> Vegan</option>
                                        <option value="gluten_free"> Gluten-Free</option>
                                        <option value="dairy_free"> Dairy-Free</option>
                                        <option value="nut_allergy"> Nut Allergy</option>
                                        <option value="kosher"> Kosher</option>
                                        <option value="halal"> Halal</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label for="registerPhone" class="ios-footnote text-gray-600 mb-2 block">Phone Number</label>
                                    <input type="tel" id="registerPhone" placeholder="(555) 123-4567"
                                           class="w-full form-input">
                                </div>
                            </div>
                            
                            <div>
                                <label for="registerBio" class="ios-footnote text-gray-600 mb-2 block">About You</label>
                                <textarea id="registerBio" rows="3" placeholder="Tell fellow campers about your outdoor experience, favorite activities, or what you're looking for in camping trips..."
                                          class="w-full form-input resize-none"></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <button type="submit" class="w-full ios-button-primary">
                        <span class="material-icons mr-2" style="font-size: 18px;">person_add</span>
                        Create Account
                    </button>
                </form>
                
                <div class="text-center mt-6">
                    <p class="ios-footnote text-gray-600">
                        Already have an account? 
                        <button id="showLogin" class="text-blue-600 hover:text-blue-800 font-medium">Sign in here</button>
                    </p>
                </div>
            </div>

        </div>

        <!-- iOS Dashboard Container -->
        <div id="dashboardContainer" class="max-w-6xl mx-auto ios-card-large hidden">
            <!-- Dashboard (shown after login) -->
            <div id="dashboard">
                <!-- Dashboard Header -->
                <div class="mb-8">
                    <div class="mb-6">
                        <h2 class="ios-title-1">My Camping Dashboard</h2>
                        <p class="ios-subhead mt-2">Your upcoming adventures</p>
                    </div>
                    <!-- Quick Actions - Each button on its own row -->
                    <div>
                        <button id="createTripBtn" class="ios-button-primary ios-button-compact w-full mb-3">
                            <span class="material-icons mr-2" style="font-size: 16px;">add_circle</span>Create Trip
                        </button>
                        <button id="joinTripBtn" class="ios-button-secondary ios-button-compact w-full">
                            <span class="material-icons mr-2" style="font-size: 16px;">search</span>Join Trip
                        </button>
                    </div>
                </div>

                <!-- Dashboard Grid -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <!-- Left Column: Tasks & Upcoming -->
                    <div class="lg:col-span-2 space-y-6">
                        <!-- My Tasks Section -->
                        <div class="ios-card">
                            <div class="p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="ios-title-3 flex items-center">
                                        <span class="material-icons mr-3" style="font-size: 24px; color: var(--ios-orange);">assignment</span>
                                        My Tasks
                                    </h3>
                                    <span id="taskCount" class="px-3 py-1 rounded-full text-sm font-medium" style="background: var(--ios-orange); color: white;">0</span>
                                </div>
                                <div id="dashboardTasks" class="space-y-3">
                                    <div class="text-center py-8 text-gray-500">
                                        <span class="material-icons text-4xl mb-2 opacity-50">task_alt</span>
                                        <p class="ios-callout">No tasks assigned yet</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Shopping Assignments Section -->
                        <div class="ios-card">
                            <div class="p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="ios-title-3 flex items-center">
                                        <span class="material-icons mr-3" style="font-size: 24px; color: var(--ios-purple);">shopping_cart</span>
                                        Shopping List
                                    </h3>
                                    <span id="shoppingCount" class="px-3 py-1 rounded-full text-sm font-medium" style="background: var(--ios-purple); color: white;">0</span>
                                </div>
                                <div id="dashboardShopping" class="space-y-3">
                                    <div class="text-center py-8 text-gray-500">
                                        <span class="material-icons text-4xl mb-2 opacity-50">shopping_basket</span>
                                        <p class="ios-callout">No shopping assignments yet</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Upcoming Trips Section -->
                        <div class="ios-card">
                            <div class="p-6">
                                <div class="mb-4">
                                    <div class="flex items-center justify-between mb-3 sm:mb-4">
                                        <h3 class="ios-title-3 flex items-center">
                                            <span class="material-icons mr-3" style="font-size: 24px; color: var(--ios-green);">event</span>
                                            Upcoming Trips
                                        </h3>
                                        <button id="browseTripsBtn" class="ios-button-secondary ios-button-compact hidden sm:flex">
                                            <span class="material-icons mr-1" style="font-size: 14px;">public</span>Browse All
                                        </button>
                                    </div>
                                    <button id="browseTripsBtn-mobile" class="ios-button-secondary w-full sm:hidden mobile-full-width-btn">
                                        <span class="material-icons mr-2" style="font-size: 16px;">public</span>Browse All Trips
                                    </button>
                                </div>
                                <div id="dashboardUpcomingTrips" class="space-y-4">
                                    <div class="text-center py-8 text-gray-500">
                                        <span class="material-icons text-4xl mb-2 opacity-50">terrain</span>
                                        <p class="ios-callout">No upcoming trips</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column: Stats & Activity -->
                    <div class="space-y-6">
                        <!-- Weather Insights -->
                        <div class="ios-card">
                            <div class="p-6">
                                <h3 class="ios-title-3 flex items-center mb-4">
                                    <span class="material-icons mr-3" style="font-size: 24px; color: var(--ios-blue);">wb_cloudy</span>
                                    Weather Insights
                                </h3>
                                <div id="weatherInsights">
                                    <div class="text-center py-4 text-gray-500">
                                        <span class="material-icons text-3xl mb-2 opacity-50">wb_cloudy</span>
                                        <p class="ios-footnote">Loading weather insights...</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Profile Completeness -->
                        <div class="ios-card">
                            <div class="p-6">
                                <h3 class="ios-title-3 flex items-center mb-4">
                                    <span class="material-icons mr-3" style="font-size: 24px; color: var(--ios-green);">person</span>
                                    Profile
                                </h3>
                                <div id="profileCompleteness">
                                    <div class="text-center py-4 text-gray-500">
                                        <span class="material-icons text-3xl mb-2 opacity-50">person</span>
                                        <p class="ios-footnote">Loading profile info...</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Trip Statistics -->
                        <div class="ios-card">
                            <div class="p-6">
                                <h3 class="ios-title-3 flex items-center mb-4">
                                    <span class="material-icons mr-3" style="font-size: 24px; color: var(--ios-orange);">analytics</span>
                                    Trip Stats
                                </h3>
                                <div class="space-y-4">
                                    <div class="flex justify-between items-center">
                                        <span class="ios-callout text-gray-600">Total Trips</span>
                                        <span id="totalTrips" class="ios-headline font-bold">0</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="ios-callout text-gray-600">Organized</span>
                                        <span id="organizedTrips" class="ios-headline font-bold">0</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="ios-callout text-gray-600">Joined</span>
                                        <span id="joinedTrips" class="ios-headline font-bold">0</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="ios-callout text-gray-600">Completed Tasks</span>
                                        <span id="completedTasks" class="ios-headline font-bold">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Activity -->
                        <div class="ios-card">
                            <div class="p-6">
                                <h3 class="ios-title-3 flex items-center mb-4">
                                    <span class="material-icons mr-3" style="font-size: 24px; color: var(--ios-purple);">history</span>
                                    Recent Activity
                                </h3>
                                <div id="recentActivity" class="space-y-3">
                                    <div class="text-center py-4 text-gray-500">
                                        <span class="material-icons text-3xl mb-2 opacity-50">timeline</span>
                                        <p class="ios-footnote">No recent activity</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Browse All Trips Section -->
                <div id="allTripsContainer" class="hidden mt-8">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-900 tracking-tight">Browse Public Trips</h3>
                        <button id="backToMyTripsBtn" class="text-blue-600 hover:text-blue-800 font-medium flex items-center">
                            <span class="material-icons text-sm mr-2">arrow_back</span>Back to My Trips
                        </button>
                    </div>
                    <div id="allTripsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- All trips will be loaded here -->
                    </div>
                </div>

                <!-- Inline Trip Creation Form -->
                <div id="createTripSection" class="hidden mt-8 bg-green-50 border border-green-200 rounded-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-900 tracking-tight">Create New Camping Trip</h3>
                        <button id="cancelCreateTripBtn" class="text-gray-400 hover:text-gray-600 p-1">
                            <span class="material-icons text-xl">close</span>
                        </button>
                    </div>

                    <form id="createTripForm">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <div>
                                <label for="tripTitle" class="block text-sm font-medium text-gray-700 mb-1">Trip Title *</label>
                                <input type="text" id="tripTitle" required maxlength="255"
                                       class="w-full form-input"
                                       placeholder="e.g., Yosemite Backpacking Adventure">
                            </div>
                            <div>
                                <label for="tripType" class="block text-sm font-medium text-gray-700 mb-1">Trip Type *</label>
                                <select id="tripType" required
                                        class="w-full form-input">
                                    <option value="">Select type</option>
                                    <option value="car_camping">Car Camping</option>
                                    <option value="backpacking">Backpacking</option>
                                    <option value="rv_camping">RV Camping</option>
                                    <option value="glamping">Glamping</option>
                                </select>
                            </div>
                            <div>
                                <label for="tripStatus" class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                                <select id="tripStatus" class="w-full form-input">
                                    <option value="planning">Planning</option>
                                    <option value="active">Active</option>
                                    <option value="completed">Completed</option>
                                </select>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <div>
                                <label for="tripLocation" class="block text-sm font-medium text-gray-700 mb-1">Location *</label>
                                <input type="text" id="tripLocation" required maxlength="255"
                                       class="w-full form-input"
                                       placeholder="e.g., Yosemite National Park, CA">
                            </div>
                            <div>
                                <label for="tripStartDate" class="block text-sm font-medium text-gray-700 mb-1">Start Date *</label>
                                <input type="date" id="tripStartDate" required
                                       class="w-full form-input">
                            </div>
                            <div>
                                <label for="tripEndDate" class="block text-sm font-medium text-gray-700 mb-1">End Date *</label>
                                <input type="date" id="tripEndDate" required
                                       class="w-full form-input">
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Trip Visibility *</label>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="radio" name="tripVisibility" value="public" id="tripPublic" required
                                           class="mr-3 text-green-600 focus:ring-green-500">
                                    <div>
                                        <div class="font-medium text-gray-900">Public Trip</div>
                                        <div class="text-sm text-gray-600">Anyone can discover and join this trip</div>
                                    </div>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="tripVisibility" value="private" id="tripPrivate" required
                                           class="mr-3 text-green-600 focus:ring-green-500">
                                    <div>
                                        <div class="font-medium text-gray-900">Private Trip</div>
                                        <div class="text-sm text-gray-600">Only people with the trip code can join</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label for="tripDescription" class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                            <textarea id="tripDescription" rows="3" maxlength="2000"
                                      class="w-full form-input form-textarea"
                                      placeholder="Describe the camping trip, what to expect, what to bring, etc."></textarea>
                        </div>

                        <div id="tripCodeDisplay" class="mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg hidden">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="font-medium text-blue-900">Trip Code</div>
                                    <div class="text-sm text-blue-700">Share this code with others to let them join your private trip</div>
                                </div>
                                <div class="text-xl font-mono font-bold text-blue-900" id="generatedTripCode"></div>
                            </div>
                        </div>

                        <div class="flex gap-3">
                            <button type="submit" class="ios-button-primary flex-1">
                                <span class="material-icons mr-2" style="font-size: 16px;">add_circle</span>Create Trip
                            </button>
                            <button type="button" id="cancelCreateTripBtn2" class="ios-button-secondary">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>

                <!-- My Trips Section -->
                <div id="myTripsContainer">
                    <h3 class="text-2xl font-bold text-gray-900 mb-6 tracking-tight">My Upcoming Trips</h3>
                    <div id="myTripsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- User's trips will be loaded here -->
                    </div>
                    <div id="noMyTrips" class="text-center py-12 text-gray-500 hidden">
                        <span class="material-icons text-6xl mb-4 text-gray-300">terrain</span>
                        <h4 class="text-xl font-semibold mb-2">No trips yet!</h4>
                        <p class="mb-4">Start your camping adventure by creating or joining a trip.</p>
                        <button onclick="document.getElementById('createTripBtn').click()" 
                                class="ios-button-primary mx-auto">
                            <span class="material-icons mr-2" style="font-size: 16px;">add_circle</span>Create Your First Trip
                        </button>
                    </div>
                </div>
            </div>

            <!-- User Profile Container -->
            <div id="profileContainer" style="display: none;">
                <!-- Profile View -->
                <div id="profileView">
                    <div class="apple-card p-8 max-w-3xl mx-auto">
                        <div class="flex justify-between items-start mb-8">
                            <div>
                                <h2 id="profileTitle" class="text-3xl font-bold text-gray-900 tracking-tight mb-2"></h2>
                                <p class="text-gray-600">Camping Profile</p>
                            </div>
                            <div class="flex gap-3">
                                <button id="editProfileBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all duration-200 font-medium hidden">
                                    <span class="material-icons text-sm mr-2">edit</span>Edit Profile
                                </button>
                                <button id="backFromProfileBtn" class="text-gray-600 hover:text-gray-800 font-medium flex items-center">
                                    <span class="material-icons text-sm mr-2">arrow_back</span>Back to Dashboard
                                </button>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <!-- Personal Information -->
                            <div class="space-y-6">
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                        <span class="material-icons text-xl mr-2">person</span>Personal Information
                                    </h3>
                                    <div class="space-y-3">
                                        <div>
                                            <label class="text-sm font-medium text-gray-600">Name</label>
                                            <p id="profileName" class="text-gray-900 font-medium"></p>
                                        </div>
                                        <div>
                                            <label class="text-sm font-medium text-gray-600">Bio</label>
                                            <p id="profileBio" class="text-gray-900"></p>
                                        </div>
                                        <div id="profilePhoneSection">
                                            <label class="text-sm font-medium text-gray-600">Phone</label>
                                            <p id="profilePhone" class="text-gray-900"></p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Camping Preferences -->
                            <div class="space-y-6">
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                        <span class="material-icons text-xl mr-2">outdoor_grill</span>Camping Style
                                    </h3>
                                    <div class="space-y-3">
                                        <div>
                                            <label class="text-sm font-medium text-gray-600">Camper Type</label>
                                            <p id="profileCamperType" class="text-gray-900 font-medium"></p>
                                        </div>
                                        <div>
                                            <label class="text-sm font-medium text-gray-600">Group Size</label>
                                            <p id="profileGroupSize" class="text-gray-900"></p>
                                        </div>
                                        <div>
                                            <label class="text-sm font-medium text-gray-600">Dietary Restrictions</label>
                                            <p id="profileDietary" class="text-gray-900"></p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Member Since -->
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                        <span class="material-icons text-xl mr-2">calendar_today</span>Member Info
                                    </h3>
                                    <div>
                                        <label class="text-sm font-medium text-gray-600">Member Since</label>
                                        <p id="profileMemberSince" class="text-gray-900"></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Profile Edit Form -->
                <div id="profileEditForm" style="display: none;">
                    <div class="apple-card p-8 max-w-3xl mx-auto">
                        <div class="flex justify-between items-center mb-8">
                            <h2 class="text-3xl font-bold text-gray-900 tracking-tight">Edit Profile</h2>
                            <button id="cancelEditProfileBtn" class="text-gray-400 hover:text-gray-600 p-1">
                                <span class="material-icons text-xl">close</span>
                            </button>
                        </div>

                        <form id="updateProfileForm">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <!-- Personal Information -->
                                <div class="space-y-4">
                                    <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                        <span class="material-icons text-xl mr-2">person</span>Personal Information
                                    </h3>
                                    
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label for="editFirstName" class="block text-sm font-medium text-gray-700 mb-1">First Name *</label>
                                            <input type="text" id="editFirstName" name="firstName" required maxlength="100" class="w-full form-input">
                                        </div>
                                        <div>
                                            <label for="editLastName" class="block text-sm font-medium text-gray-700 mb-1">Last Name *</label>
                                            <input type="text" id="editLastName" name="lastName" required maxlength="100" class="w-full form-input">
                                        </div>
                                    </div>

                                    <div>
                                        <label for="editBio" class="block text-sm font-medium text-gray-700 mb-1">Bio</label>
                                        <textarea id="editBio" name="bio" rows="3" maxlength="1000" class="w-full form-input form-textarea" placeholder="Tell other campers about yourself..."></textarea>
                                    </div>

                                    <div>
                                        <label for="editPhone" class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                                        <input type="tel" id="editPhone" name="phone" maxlength="20" class="w-full form-input" placeholder="(555) 123-4567">
                                    </div>

                                    <div>
                                        <label for="editHomeAddress" class="block text-sm font-medium text-gray-700 mb-1">Home Address</label>
                                        <input type="text" id="editHomeAddress" name="homeAddress" maxlength="200" class="w-full form-input" placeholder="123 Main Street">
                                    </div>

                                    <div class="grid grid-cols-3 gap-3">
                                        <div>
                                            <label for="editHomeCity" class="block text-sm font-medium text-gray-700 mb-1">City</label>
                                            <input type="text" id="editHomeCity" name="homeCity" maxlength="100" class="w-full form-input" placeholder="City">
                                        </div>
                                        <div>
                                            <label for="editHomeState" class="block text-sm font-medium text-gray-700 mb-1">State</label>
                                            <input type="text" id="editHomeState" name="homeState" maxlength="50" class="w-full form-input" placeholder="CA">
                                        </div>
                                        <div>
                                            <label for="editHomeZip" class="block text-sm font-medium text-gray-700 mb-1">ZIP</label>
                                            <input type="text" id="editHomeZip" name="homeZip" maxlength="20" class="w-full form-input" placeholder="12345">
                                        </div>
                                    </div>
                                </div>

                                <!-- Camping Preferences -->
                                <div class="space-y-4">
                                    <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                        <span class="material-icons text-xl mr-2">outdoor_grill</span>Camping Preferences
                                    </h3>

                                    <div>
                                        <label for="editCamperType" class="block text-sm font-medium text-gray-700 mb-1">Camper Type</label>
                                        <select id="editCamperType" name="camperType" class="w-full form-input">
                                            <option value="">Select your camping style</option>
                                            <option value="tent">Tent Camping</option>
                                            <option value="trailer">Travel Trailer</option>
                                            <option value="rv">RV/Motorhome</option>
                                            <option value="van">Van/Camper Van</option>
                                            <option value="fifth_wheel">5th Wheel</option>
                                        </select>
                                    </div>

                                    <div>
                                        <label for="editGroupSize" class="block text-sm font-medium text-gray-700 mb-1">People in Your Group</label>
                                        <input type="number" id="editGroupSize" name="groupSize" min="1" max="20" value="1" class="w-full form-input">
                                    </div>

                                    <div>
                                        <label for="editDietary" class="block text-sm font-medium text-gray-700 mb-1">Dietary Restrictions</label>
                                        <select id="editDietary" name="dietaryRestrictions" class="w-full form-input">
                                            <option value="">No restrictions</option>
                                            <option value="vegetarian">Vegetarian</option>
                                            <option value="vegan">Vegan</option>
                                            <option value="gluten_free">Gluten-Free</option>
                                            <option value="dairy_free">Dairy-Free</option>
                                            <option value="nut_allergy">Nut Allergy</option>
                                            <option value="kosher">Kosher</option>
                                            <option value="halal">Halal</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="flex gap-3 mt-8 pt-6 border-t">
                                <button type="submit" class="ios-button-primary flex-1">
                                    <span class="material-icons mr-2" style="font-size: 16px;">save</span>Save Changes
                                </button>
                                <button type="button" id="cancelEditProfileBtn2" class="ios-button-secondary">
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Professional Notification System -->
        <div id="notificationContainer"></div>
        
        <!-- Error/Success Messages -->
        <div id="messageContainer" class="max-w-md mx-auto mt-4"></div>
    </div>

    <!-- Modal System -->
    <div id="modalOverlay" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3 id="modalTitle" class="modal-title">Modal Title</h3>
                <button id="modalClose" class="modal-close">
                    <span class="material-icons" style="font-size: 18px;">close</span>
                </button>
            </div>
            <div id="modalBody" class="modal-body">
                <!-- Modal content will be inserted here -->
            </div>
        </div>
    </div>


    <script src="app.js"></script>
    <script>
        // Initialize the app and make it globally available
        window.app = new CampingApp();
        app = window.app; // Also assign to global app variable
        
        // Simple address lookup using OpenStreetMap
        function initAddressLookup() {
            const locationInput = document.getElementById('tripLocation');
            if (!locationInput) return;
            
            let suggestionsList = null;
            let debounceTimer = null;
            
            // Create suggestions dropdown
            function createSuggestionsList() {
                if (suggestionsList) return;
                
                suggestionsList = document.createElement('div');
                suggestionsList.style.cssText = `
                    position: absolute;
                    top: 100%;
                    left: 0;
                    right: 0;
                    background: white;
                    border: 1px solid #d1d5db;
                    border-top: none;
                    border-radius: 0 0 6px 6px;
                    max-height: 200px;
                    overflow-y: auto;
                    z-index: 1000;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                    display: none;
                `;
                
                // Make parent container relative
                locationInput.parentElement.style.position = 'relative';
                locationInput.parentElement.appendChild(suggestionsList);
            }
            
            // Search for addresses
            async function searchAddresses(query) {
                if (query.length < 3) {
                    suggestionsList.style.display = 'none';
                    return;
                }
                
                try {
                    const response = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5&countrycodes=us,ca&addressdetails=1`);
                    const results = await response.json();
                    
                    displaySuggestions(results);
                } catch (error) {
                    console.log('Address lookup error:', error);
                }
            }
            
            // Display suggestions
            function displaySuggestions(results) {
                if (!results || results.length === 0) {
                    suggestionsList.style.display = 'none';
                    return;
                }
                
                suggestionsList.innerHTML = '';
                
                results.forEach(result => {
                    const item = document.createElement('div');
                    item.style.cssText = `
                        padding: 10px;
                        cursor: pointer;
                        border-bottom: 1px solid #f3f4f6;
                        font-size: 14px;
                    `;
                    item.textContent = result.display_name;
                    
                    item.addEventListener('mouseenter', () => {
                        item.style.backgroundColor = '#f3f4f6';
                    });
                    
                    item.addEventListener('mouseleave', () => {
                        item.style.backgroundColor = 'white';
                    });
                    
                    item.addEventListener('click', () => {
                        locationInput.value = result.display_name;
                        suggestionsList.style.display = 'none';
                    });
                    
                    suggestionsList.appendChild(item);
                });
                
                suggestionsList.style.display = 'block';
            }
            
            // Set up event listeners
            createSuggestionsList();
            
            locationInput.addEventListener('input', (e) => {
                clearTimeout(debounceTimer);
                debounceTimer = setTimeout(() => {
                    searchAddresses(e.target.value);
                }, 300);
            });
            
            // Hide suggestions when clicking outside
            document.addEventListener('click', (e) => {
                if (!locationInput.contains(e.target) && !suggestionsList.contains(e.target)) {
                    suggestionsList.style.display = 'none';
                }
            });
            
            console.log('Address lookup initialized');
        }
        
        // Initialize when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initAddressLookup);
        } else {
            initAddressLookup();
        }
    </script>
</body>
</html>
